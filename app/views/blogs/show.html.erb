<header class="page-header">
  <h1 class="page-heading text-center">
    <%= @blog.title %>
  </h1>
</header>

<%= @blog.content %>

<hr>

<h4>Comments (<%= @comments.size %>)</h4>

<% if current_user %>
  <%= bootstrap_form_for [@blog, @comment] do |f| %>

    <%= f.text_field :author, hide_label: true, placeholder: "First name" %>

    <%= f.text_area :text, hide_label: true, placeholder: "Comment" %>

    <!-- Google's reCapthca pluging for preventing spam -->
    <%= recaptcha_tags %>

    <%= f.submit "Add", class: "add-after-recaptcha btn btn-primary" %>

  <% end %>
<% end %>

<div class="blog-comments-wrapper">
  <ul>
    <% @comments.each do |comment| %>
      <li>
        <p class="comment-author">
          <%= comment.author %>:
        </p>

        <%= comment.text %>

        <% if admin? %>
          <p class="clearfix">
            <small class="edit-delete-wrapper pull-right">
              <%= link_to "Delete comment", blog_comment_path(@blog, comment), :data => {confirm: "Sure you want to delete this?", method: "delete"}, class: "text-danger" %>
            </small>
          </p>
        <% end %>

      </li>
    <% end %>
  </ul>
</div>

<% if admin? %>
  <footer>
    <span class="pull-right edit-delete-links">
      <%= link_to "Edit post", edit_blog_path(@blog) %> |
      <%= link_to "Delete post", @blog, class:"text-danger", method: :delete %>
    <span>
  </footer>
<% end %>
